<!DOCTYPE html><html lang="en"><head><title>gulpfile</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="gulpfile"><meta name="groc-project-path" content="gulpfile.js"><meta name="groc-github-url" content="https://github.com/DimensionSoftware/instant-skeleton"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/DimensionSoftware/instant-skeleton/blob/master/gulpfile.js">gulpfile.js</a></div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><p>Generated by LiveScript 1.3.0</p></div></div><div class="code"><div class="wrapper">(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
  <span class="hljs-keyword">var</span> gulp, gulpShell, del, gulpNodemon, gulpUtil, gulpLivescript, gulpStylus, nib, gulpJade, gulpWebpack, gulpWatch, gulpLivereload, env, script, x$, defaultTasks;
  gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>);
  gulpShell = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-shell'</span>);
  del = <span class="hljs-built_in">require</span>(<span class="hljs-string">'del'</span>);
  gulpNodemon = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-nodemon'</span>);
  gulpUtil = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-util'</span>);
  gulpLivescript = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-livescript'</span>);
  gulpStylus = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-stylus'</span>);
  nib = <span class="hljs-built_in">require</span>(<span class="hljs-string">'nib'</span>);
  gulpJade = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-jade'</span>);
  gulpWebpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-webpack'</span>);
  gulpWatch = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-watch'</span>);
  gulpLivereload = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-livereload'</span>);
  env = process.env.NODE_ENV || <span class="hljs-string">'development'</span>;
  gulp.task(<span class="hljs-string">'build:stylus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
    <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">'./client/stylus/master.styl'</span>).pipe(gulpStylus({
      use: nib(),
      compress: <span class="hljs-literal">true</span>
    })).pipe(gulp.dest(<span class="hljs-string">'./public'</span>));
  });
  gulp.task(<span class="hljs-string">'build:react'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
    <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">'./shared/react/*.ls'</span>).pipe(gulpLivescript({
      bare: <span class="hljs-literal">true</span>
    })).pipe(gulp.dest(<span class="hljs-string">'./build/shared/react'</span>));
  });
  gulp.task(<span class="hljs-string">'build:js'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
    <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">'./{client,shared,server}/*.ls'</span>).pipe(gulpLivescript({
      bare: <span class="hljs-literal">true</span>
    })).pipe(gulp.dest(<span class="hljs-string">'./build'</span>));
  });
  gulp.task(<span class="hljs-string">'build'</span>, [<span class="hljs-string">'build:js'</span>, <span class="hljs-string">'build:stylus'</span>]);
  gulp.task(<span class="hljs-string">'pack'</span>, [<span class="hljs-string">'build:js'</span>, <span class="hljs-string">'build:react'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
    gulp.src(<span class="hljs-string">'./build/{client,shared}/*.js'</span>).pipe(gulpWebpack()).pipe(gulp.dest(<span class="hljs-string">'./public/builds'</span>));
    <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">'./client/vendor/*.js'</span>).pipe(gulpWebpack()).pipe(gulp.dest(<span class="hljs-string">'./public/vendor'</span>));
  });
  gulp.task(<span class="hljs-string">'watch'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
    gulp.watch(<span class="hljs-string">'./shared/react/*.ls'</span>, [<span class="hljs-string">'build:react'</span>]);
    gulp.watch(<span class="hljs-string">'./{client,shared,server}/*.ls'</span>, [<span class="hljs-string">'build:js'</span>]);
    gulp.watch(<span class="hljs-string">'./client/stylus/*.styl'</span>, [<span class="hljs-string">'build:stylus'</span>]);
    <span class="hljs-keyword">return</span> gulpLivereload.listen();
  });
  gulp.task(<span class="hljs-string">'stop'</span>, gulpShell.task(<span class="hljs-string">'pm2 stop processes.json'</span>));
  gulp.task(<span class="hljs-string">'clean'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(cb)</span>{</span>
    <span class="hljs-keyword">return</span> del([<span class="hljs-string">'./build/**'</span>], cb);
  });
  script = <span class="hljs-string">'./build/server/main.js'</span>;
  gulp.task(<span class="hljs-string">'development'</span>, [<span class="hljs-string">'build'</span>, <span class="hljs-string">'watch'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
    <span class="hljs-keyword">return</span> gulpNodemon({
      script: script,
      nodeArgs: <span class="hljs-string">'--harmony'</span>
    });
  });
  gulp.task(<span class="hljs-string">'production'</span>, [<span class="hljs-string">'build'</span>], gulpShell.task(<span class="hljs-string">'pm2 start processes.json'</span>));
  x$ = defaultTasks = [<span class="hljs-string">'build'</span>, <span class="hljs-string">'pack'</span>];
  x$.push(env);
  gulp.task(<span class="hljs-string">'default'</span>, defaultTasks);
}).call(<span class="hljs-keyword">this</span>);</div></div></div></div></body></html>