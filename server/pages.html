<!DOCTYPE html><html lang="en"><head><title>server/pages</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="server/pages"><meta name="groc-project-path" content="server/pages.ls"><meta name="groc-github-url" content="https://github.com/DimensionSoftware/instant-skeleton"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/DimensionSoftware/instant-skeleton/blob/master/server/pages.ls">server/pages.ls</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-built_in">require</span>! {
  <span class="hljs-string">\koa</span>
  <span class="hljs-string">\koa-router</span>

  <span class="hljs-string">'./middleware'</span>: mw

  <span class="hljs-string">'../shared/features'</span>
  <span class="hljs-string">'../shared/routes'</span>: {R}
}

app = koa!
<span class="hljs-built_in">module</span>.exports = koa-router app</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><PAGES></div></div><div class="code"><div class="wrapper">app.get R<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">\HomePage),</span> (next) -&gt;*
  <span class="hljs-property">@locals</span>.greeting   = <span class="hljs-string">'Hello World!'</span> # <span class="hljs-keyword">default</span>
  <span class="hljs-property">@session</span>.last-page = <span class="hljs-property">@session</span>.<span class="hljs-literal">on</span>-page
  <span class="hljs-property">@session</span>.<span class="hljs-literal">on</span>-page   = <span class="hljs-string">\HomePage</span>
  yield mw.react-<span class="hljs-keyword">or</span>-json
  yield next

<span class="hljs-keyword">if</span> features.hello-page
  app.get R(<span class="hljs-string">\HelloPage),</span> mw.geoip, (next) -&gt;*
    <span class="hljs-property">@session</span>.last-page = <span class="hljs-property">@session</span>.<span class="hljs-literal">on</span>-page
    <span class="hljs-property">@session</span>.<span class="hljs-literal">on</span>-page   = <span class="hljs-string">\HelloPage</span>
    yield mw.react-<span class="hljs-keyword">or</span>-json
    yield next</span></span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p></PAGES></p></div></div></div></div></body></html>