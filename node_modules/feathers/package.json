{
  "name": "feathers",
  "description": "Shared REST and real-time APIs with Express.",
  "version": "1.0.0",
  "homepage": "http://feathersjs.com",
  "repository": {
    "type": "git",
    "url": "git://github.com/feathersjs/feathers.git"
  },
  "keywords": [
    "feathers",
    "REST",
    "socket.io",
    "realtime"
  ],
  "author": {
    "name": "Feathers",
    "email": "hello@feathersjs.com",
    "url": "http://feathersjs.com"
  },
  "contributors": [
    {
      "name": "Eric Kryski",
      "email": "e.kryski@gmail.com",
      "url": "http://erickryski.com"
    },
    {
      "name": "David Luecke",
      "email": "daff@neyeon.de",
      "url": "http://neyeon.com"
    }
  ],
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/feathersjs/feathers/issues"
  },
  "main": "lib/feathers",
  "directories": {
    "lib": "lib"
  },
  "scripts": {
    "test": "grunt"
  },
  "engines": {
    "node": ">= 0.10.0",
    "npm": ">= 1.3.0"
  },
  "dependencies": {
    "express": "^4.0.0",
    "body-parser": "^1.0.2",
    "feathers-errors": ">=0.2.0",
    "lodash": "^2.4.1",
    "primus": "^2.4.0",
    "primus-emitter": "^3.0.2",
    "rubberduck": "^1.0.0",
    "socket.io": "^1.1.0",
    "uberproto": "^1.1.0"
  },
  "devDependencies": {
    "grunt": "^0.4.0",
    "grunt-cli": "^0.1.0",
    "grunt-contrib-jshint": "^0.x",
    "grunt-jsbeautifier": "^0.2.0",
    "grunt-release": "^0.7.0",
    "grunt-simple-mocha": "^0.4.0",
    "mocha": "^1.x",
    "q": "^1.0.1",
    "request": "^2.x",
    "socket.io-client": "^1.0.0",
    "sockjs": "^0.3.9",
    "sockjs-client-node": "^0.1.1"
  },
  "readme": "# Feathers - Let your applications fly!\n\n> Shared REST and real-time APIs with Express.\n\n## To get started\n\nFeathers extends [Express 4](http://expressjs.com), one of the most popular web frameworks for [NodeJS](http://nodejs.org/). It makes it easy to create shared RESTful web services and real-time applications using SocketIO and several other NodeJS websocket libraries.\n\nIf you are not familiar with Express head over to the [Express Guides](http://expressjs.com/guide.html) to get an idea. Feathers works the exact same way except that `var app = require('express')();` is replaced with `var app = require('feathers')()`. This means that you can literally drop Feathers into your existing Express 4 application and start adding new services right away. The following guide will walk through creating a basic Todo REST and websocket API with Feathers and MongoDB and also explain how to add authentication and authorization. For additional information also make sure to read through the [API documentation](/api/) later.\n\nTo get started with this guide, lets create a new folder and in it\n\n> `npm install feathers`\n\n## Your first service\n\nThe most important concept Feathers adds to Express is that of __services__. Services can be used just like an Express middleware function but instead are JavaScript objects that provide at least one of the following methods:\n\n```js\nvar myService = {\n  find: function(params, callback) {},\n  get: function(id, params, callback) {},\n  create: function(data, params, callback) {},\n  update: function(id, data, params, callback) {},\n  patch: function(id, data, params, callback) {},\n  remove: function(id, params, callback) {},\n  setup: function(app, path) {}\n}\n```\n\nThis object can be registered like `app.use('/my-service', myService)` which - if configured - makes it available as a REST endpoint at `/my-service` and also through websockets. As usual in NodeJS, `callback` has to be called with the error (if any) first and the data as the second parameter.\n\n### Simple Todo\n\nWith those methods available we can implement a very basic Todo service that returns a single Todo using the id passed to the `get` method:\n\n```js\n// app.js\nvar feathers = require('feathers');\nvar app = feathers();\nvar todoService = {\n  get: function(id, params, callback) {\n    // Call back with no error and the Todo object\n    callback(null, {\n      id: id,\n      text: 'You have to do ' + id + '!'\n    });\n  }\n};\n\napp.configure(feathers.rest())\n  .use('/todos', todoService)\n  .listen(3000);\n```\n\nAfter running\n\n> `node app.js`\n\nYou can go to [localhost:3000/todos/dishes](http://localhost:3000/todos/dishes) and should see the following JSON response:\n\n```js\n{\n  \"id\": \"dishes\",\n  \"text\": \"You have to do dishes!\"\n}\n```\n\n### CRUD Todos\n\nAs you might have noticed, service methods mainly reflect basic [CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete) functionality. Following up is a longer example with comments for implementing a complete Todo service that manages all Todos in memory:\n\n```js\n// todos.js\nmodule.exports = {\n  // The current id counter\n  id: 0,\n  // An array with all todos\n  todos: [],\n\n  // Tries to get a single Todo by its id.\n  // Throws an error if none can be found.\n  getTodo: function(id) {\n    var todos = this.todos;\n\n    for(var i = 0; i < todos.length; i++) {\n      if(todos[i].id === parseInt(id, 10)) {\n        return todos[i];\n      }\n    }\n\n    // If we didn't return yet we can throw an error\n    throw new Error('Could not find Todo');\n  },\n\n  // Return all Todos\n  find: function(params, callback) {\n    callback(null, this.todos);\n  },\n\n  // Returns a single Todo by id\n  get: function(id, params, callback) {\n    try {\n      callback(null, this.getTodo(id));\n    } catch(error) {\n      callback(error);\n    }\n  },\n\n  // Create a new Todo\n  create: function(data, params, callback) {\n    // Increment the global ID counter and\n    // use it as the Todos id\n    data.id = this.id++;\n    this.todos.push(data);\n    callback(null, data);\n  },\n\n  // Update (replace) an existing Todo with new data\n  update: function(id, data, params, callback) {\n    try {\n      var todo = this.getTodo(id);\n      var index = this.todos.indexOf(todo);\n\n      data.id = todo.id;\n      // Replace all the data\n      this.todos[index] = data;\n      callback(null, data);\n    } catch(error) {\n      callback(error);\n    }\n  },\n\n  // Extend the data of an existing Todo\n  patch: function(id, data, params, callback) {\n    try {\n      var todo = this.getTodo(id);\n\n      // Extend the existing Todo with the new data\n      Object.keys(data).forEach(function(key) {\n        if(key !== 'id') {\n          todo[key] = data[key];\n        }\n      });\n\n      callback(null, todo);\n    } catch(error) {\n      callback(error);\n    }\n  },\n\n  // Remove an existing Todo by id\n  remove: function(id, params, callback) {\n    try {\n      var todo = this.getTodo(id);\n      var index = this.todos.indexOf(todo);\n\n      // Splice it out of our Todo list\n      this.todos.splice(index, 1);\n      callback(null, todo);\n    } catch(error) {\n      callback(error);\n    }\n  }\n}\n```\n\nThe above example exports the service as a module from its own file, `todos.js`. This means that in  `app.js` we can replace the previous `todoService` with loading that module. In order to parse JSON encoded HTTP bodies we additionally need to install and load the Express [body-parser](https://github.com/expressjs/body-parser):\n\n> `npm install body-parser`\n\n```js\n// app.js\nvar feathers = require('feathers');\nvar bodyParser = require('body-parser');\n\nvar app = feathers();\nvar todoService = require('./todos');\n\napp.configure(feathers.rest())\n  .use(bodyParser.json())\n  .use('/todos', todoService)\n  .listen(3000);\n```\n\nRunning `app.js` will now provide a fully functional REST API at `http://localhost:3000/todos`. You can test it, for example, using the [Postman](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en) REST client plugin for Google chrome or via CURL:\n\n\n<blockquote><pre>curl 'http://localhost:3000/todos/' -H 'Content-Type: application/json' --data-binary '{ \"text\": \"You have to do dishes!\" }'</pre></blockquote>\n\n## Getting real-time\n\nAs previously mentioned, a Feathers service can also be exposed through websockets. You can either use [SocketIO](http://socket.io) or [Primus](https://github.com/primus/primus) - an abstraction layer for differentNode websocket libraries. In the following examples we will use SocketIO.\n\nSocketIO can be enabled by calling `app.configure(feathers.socketio())`. Once set up, it is possible to call service methods by emitting events like `<servicepath>::<methodname>` on the socket and also receive events by listening to `<servicepath> <eventname>` (*eventname* can be `created`, `updated`, `patched` or `removed`). To make it easier to test in a web page, lets also statically host the files in the current folder. `app.js` then looks like this:\n\n```js\n// app.js\nvar feathers = require('feathers');\nvar bodyParser = require('body-parser');\n\nvar app = feathers();\nvar todoService = require('./todos');\n\napp.configure(feathers.rest())\n  .configure(feathers.socketio())\n  .use(bodyParser.json())\n  .use('/todos', todoService)\n  .use('/', feathers.static(__dirname))\n  .listen(3000);\n```\n\nTo test the connection, we can create an `index.html` file in the same folder. The example will connect to SocketIO, create a new Todo and also log when any Todo has been created, updated or patched:\n\n```html\n<!DOCTYPE HTML>\n<html>\n<head>\n  <title>Feathers SocketIO example</title>\n</head>\n<body>\n  <h1>A Feathers SocketIO example</h1>\n  <script src=\"http://localhost:3000/socket.io/socket.io.js\"></script>\n  <script type=\"text/javascript\">\n    // Connect to SocketIO on the same host\n    var socket = io.connect();\n\n    socket.on('todos created', function(todo) {\n      console.log('Someone created a new Todo', todo);\n    });\n\n    socket.on('todos updated', function(todo) {\n      console.log('Someone updated a Todo', todo);\n    });\n\n    socket.on('todos patched', function(todo) {\n      console.log('Someone patched', todo);\n    });\n\n    socket.emit('todos::create', {\n      description: 'You have to do something real-time!'\n    }, {}, function(error, todo) {\n      socket.emit('todos::find', {}, function(error, todos) {\n        console.log('Todos from server:', todos);\n      });\n    });\n  </script>\n</body>\n</html>\n```\n\nAfter restarting, going directly to [localhost:3000](http://localhost:3000) with the console open will show what is happening on the HTML page. You can also see the newly created Todo at the REST endpoint [localhost:3000/todos](http://localhost:3000/todos). With the page open, reating a new  Todo via the REST API, for example\n\n<blockquote><pre>curl 'http://localhost:3000/todos/' -H 'Content-Type: application/json' --data-binary '{ \"text\": \"Do something\" }'</pre></blockquote>\n\nwill also log `Someone created a new Todo`. This is how you can implement real-time functionality in any web page without a lot of magic using standardized websocket messages instead of having to re-invent your own.\n\n## Persisting to MongoDB\n\nOur CRUD Todo functionality implemented in the service is very common and doesn't have to be implemented form scratch every time. In fact, this is almost exactly what is being provided already in the [feathers-memory](https://github.com/feathersjs/feathers-memory) module. Luckily we don't have to stop at storing everything in-memory. For the popular NoSQL database [MongoDB](http://mongodb.org) , for example, there already is the [feathers-mongodb](https://github.com/feathersjs/feathers-mongodb) module and if you need more ORM-like functionality through [Mongoose](http://mongoosejs.com/) you can also use [feathers-mongoose](https://github.com/feathersjs/feathers-mongoose).\n\n> `npm install feathers-mongodb`\n\nWith a MongoDB instance running locally, we can replace our `todoService` in `app.js` with a MongoDB storage on the `feathers-demo` database and the `todos` collection like this:\n\n```js\n// app.js\nvar feathers = require('feathers');\nvar mongodb = require('feathers-mongodb');\nvar bodyParser = require('body-parser');\n\nvar app = feathers();\nvar todoService = mongodb({\n  db: 'feathers-demo',\n  collection: 'todos'\n});\n\napp.configure(feathers.rest())\n  .configure(feathers.socketio())\n  .use(bodyParser.json())\n  .use('/todos', todoService)\n  .use('/', feathers.static(__dirname))\n  .listen(3000);\n```\n\nAnd just like this we have a full REST and real-time Todo API that stores its data into MongoDB in just 16 lines of code!\n\n## Next steps\n\nTo learn more about Feathers go to the [feathersjs.com](http://feathersjs.com) homepage and continue reading this guide.\n",
  "readmeFilename": "readme.md",
  "_id": "feathers@1.0.0",
  "_from": "feathers@*"
}
