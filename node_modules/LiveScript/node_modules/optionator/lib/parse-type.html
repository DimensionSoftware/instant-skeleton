<!DOCTYPE html><html lang="en"><head><title>node_modules/LiveScript/node_modules/optionator/lib/parse-type</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../../"><meta name="groc-document-path" content="node_modules/LiveScript/node_modules/optionator/lib/parse-type"><meta name="groc-project-path" content="node_modules/LiveScript/node_modules/optionator/lib/parse-type.js"><meta name="groc-github-url" content="https://github.com/DimensionSoftware/instant-skeleton"><link rel="stylesheet" type="text/css" media="all" href="../../../../../assets/style.css"><script type="text/javascript" src="../../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/DimensionSoftware/instant-skeleton/blob/master/node_modules/LiveScript/node_modules/optionator/lib/parse-type.js">node_modules/LiveScript/node_modules/optionator/lib/parse-type.js</a></div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><p>Generated by LiveScript 1.2.0</p></div></div><div class="code"><div class="wrapper">(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
  <span class="hljs-keyword">var</span> reject, tokenRegex;
  reject = <span class="hljs-built_in">require</span>(<span class="hljs-string">'prelude-ls'</span>).reject;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeWord</span><span class="hljs-params">(tokens)</span>{</span>
    <span class="hljs-keyword">var</span> token;
    token = tokens[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (!(token != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-regexp">/^[a-zA-Z]+$/</span>.test(token))) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Exected textual string."</span>);
    }
    <span class="hljs-keyword">return</span> tokens.shift();
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeOp</span><span class="hljs-params">(tokens, op)</span>{</span>
    <span class="hljs-keyword">var</span> token;
    token = tokens[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (token !== op) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Expected "</span> + op);
    }
    <span class="hljs-keyword">return</span> tokens.shift();
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maybeConsumeOp</span><span class="hljs-params">(tokens, op)</span>{</span>
    <span class="hljs-keyword">var</span> token;
    token = tokens[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (token === op) {
      <span class="hljs-keyword">return</span> tokens.shift();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeArray</span><span class="hljs-params">(tokens)</span>{</span>
    <span class="hljs-keyword">var</span> contentType;
    consumeOp(tokens, <span class="hljs-string">'['</span>);
    contentType = consumeTypes(tokens);
    <span class="hljs-keyword">if</span> (!contentType) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Must specify content type for Array."</span>);
    }
    consumeOp(tokens, <span class="hljs-string">']'</span>);
    <span class="hljs-keyword">return</span> {
      type: <span class="hljs-string">'Array'</span>,
      contentType: contentType
    };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeTuple</span><span class="hljs-params">(tokens)</span>{</span>
    <span class="hljs-keyword">var</span> contentTypes, that;
    contentTypes = [];
    consumeOp(tokens, <span class="hljs-string">'('</span>);
    <span class="hljs-keyword">while</span> (that = consumeTypes(tokens)) {
      contentTypes.push(that);
      <span class="hljs-keyword">if</span> (!maybeConsumeOp(tokens, <span class="hljs-string">','</span>)) {
        <span class="hljs-keyword">break</span>;
      }
    }
    consumeOp(tokens, <span class="hljs-string">')'</span>);
    <span class="hljs-keyword">return</span> {
      type: <span class="hljs-string">'Tuple'</span>,
      contentTypes: contentTypes
    };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeProperty</span><span class="hljs-params">(tokens)</span>{</span>
    <span class="hljs-keyword">var</span> key, type;
    key = consumeWord(tokens);
    consumeOp(tokens, <span class="hljs-string">':'</span>);
    type = consumeTypes(tokens);
    <span class="hljs-keyword">return</span> {
      key: key,
      type: type
    };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeObject</span><span class="hljs-params">(tokens)</span>{</span>
    <span class="hljs-keyword">var</span> properties, that;
    properties = [];
    consumeOp(tokens, <span class="hljs-string">'{'</span>);
    <span class="hljs-keyword">while</span> (that = consumeProperty(tokens)) {
      properties.push(that);
      <span class="hljs-keyword">if</span> (!maybeConsumeOp(tokens, <span class="hljs-string">','</span>)) {
        <span class="hljs-keyword">break</span>;
      }
    }
    consumeOp(tokens, <span class="hljs-string">'}'</span>);
    <span class="hljs-keyword">return</span> {
      type: <span class="hljs-string">'Object'</span>,
      properties: properties
    };
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeType</span><span class="hljs-params">(tokens)</span>{</span>
    <span class="hljs-keyword">switch</span> (tokens[<span class="hljs-number">0</span>]) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'['</span>:
      <span class="hljs-keyword">return</span> consumeArray(tokens);
    <span class="hljs-keyword">case</span> <span class="hljs-string">'{'</span>:
      <span class="hljs-keyword">return</span> consumeObject(tokens);
    <span class="hljs-keyword">case</span> <span class="hljs-string">'('</span>:
      <span class="hljs-keyword">return</span> consumeTuple(tokens);
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">return</span> {
        type: consumeWord(tokens)
      };
    }
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeMaybe</span><span class="hljs-params">(tokens)</span>{</span>
    <span class="hljs-keyword">var</span> maybe, type;
    <span class="hljs-keyword">if</span> (tokens[<span class="hljs-number">0</span>] === <span class="hljs-string">'Maybe'</span>) {
      tokens.shift();
      maybe = <span class="hljs-literal">true</span>;
    }
    type = consumeType(tokens);
    <span class="hljs-keyword">if</span> (maybe) {
      <span class="hljs-keyword">return</span> {
        type: <span class="hljs-string">'Maybe'</span>,
        contentType: type
      };
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> type;
    }
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">consumeTypes</span><span class="hljs-params">(tokens)</span>{</span>
    <span class="hljs-keyword">var</span> types;
    types = [];
    <span class="hljs-keyword">for</span> (;;) {
      types.push(consumeMaybe(tokens));
      <span class="hljs-keyword">if</span> (!maybeConsumeOp(<span class="hljs-string">'|'</span>)) {
        <span class="hljs-keyword">break</span>;
      }
    }
    <span class="hljs-keyword">if</span> (!types.length) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Expected type(s)."</span>);
    }
    <span class="hljs-keyword">return</span> types;
  }
  tokenRegex = <span class="hljs-regexp">/[:,\[\]\(\)}{]|[a-zA-Z]+/g</span>;
  module.exports = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(input)</span>{</span>
    <span class="hljs-keyword">var</span> tokens, e;
    tokens = reject(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(it)</span>{</span>
      <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^\s*$/</span>.test(it);
    })(
    input.match(tokenRegex));
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> consumeTypes(tokens);
    } <span class="hljs-keyword">catch</span> (e$) {
      e = e$;
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(e.message + <span class="hljs-string">" - '"</span> + tokens.join(<span class="hljs-string">'#'</span>) + <span class="hljs-string">"' - '"</span> + input + <span class="hljs-string">"'"</span>);
    }
  };
}).call(<span class="hljs-keyword">this</span>);</div></div></div></div></body></html>