<!DOCTYPE html><html lang="en"><head><title>node_modules/LiveScript/node_modules/optionator/node_modules/deep-is/index</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../../../"><meta name="groc-document-path" content="node_modules/LiveScript/node_modules/optionator/node_modules/deep-is/index"><meta name="groc-project-path" content="node_modules/LiveScript/node_modules/optionator/node_modules/deep-is/index.js"><meta name="groc-github-url" content="https://github.com/DimensionSoftware/instant-skeleton"><link rel="stylesheet" type="text/css" media="all" href="../../../../../../assets/style.css"><script type="text/javascript" src="../../../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/DimensionSoftware/instant-skeleton/blob/master/node_modules/LiveScript/node_modules/optionator/node_modules/deep-is/index.js">node_modules/LiveScript/node_modules/optionator/node_modules/deep-is/index.js</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-keyword">var</span> pSlice = <span class="hljs-built_in">Array</span>.prototype.slice;
<span class="hljs-keyword">var</span> Object_keys = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Object</span>.keys === <span class="hljs-string">'function'</span>
    ? <span class="hljs-built_in">Object</span>.keys
    : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(obj)</span> {</span>
        <span class="hljs-keyword">var</span> keys = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) keys.push(key);
        <span class="hljs-keyword">return</span> keys;
    }
;

<span class="hljs-keyword">var</span> deepEqual = module.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(actual, expected)</span> {</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>enforce Object.is +0 !== -0</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-keyword">if</span> (actual === <span class="hljs-number">0</span> &amp;&amp; expected === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> areZerosEqual(actual, expected);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>7.1. All identical values are equivalent, as determined by ===.</p></div></div><div class="code"><div class="wrapper">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (actual === expected) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (actual <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span> &amp;&amp; expected <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>) {
    <span class="hljs-keyword">return</span> actual.getTime() === expected.getTime();

  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isNumberNaN(actual)) {
    <span class="hljs-keyword">return</span> isNumberNaN(expected);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>7.3. Other pairs that do not both pass typeof value == &#39;object&#39;,
equivalence is determined by ==.</p></div></div><div class="code"><div class="wrapper">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> actual != <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> expected != <span class="hljs-string">'object'</span>) {
    <span class="hljs-keyword">return</span> actual == expected;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>7.4. For all other Object pairs, including Array objects, equivalence is
determined by having the same number of owned properties (as verified
with Object.prototype.hasOwnProperty.call), the same set of keys
(although not necessarily the same order), equivalent values for every
corresponding key, and an identical &#39;prototype&#39; property. Note: this
accounts for both named and indexed properties on Arrays.</p></div></div><div class="code"><div class="wrapper">  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> objEquiv(actual, expected);
  }
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUndefinedOrNull</span><span class="hljs-params">(value)</span> {</span>
  <span class="hljs-keyword">return</span> value === <span class="hljs-literal">null</span> || value === <span class="hljs-literal">undefined</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArguments</span><span class="hljs-params">(object)</span> {</span>
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(object) == <span class="hljs-string">'[object Arguments]'</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumberNaN</span><span class="hljs-params">(value)</span> {</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>NaN === NaN -&gt; false</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value == <span class="hljs-string">'number'</span> &amp;&amp; value !== value;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">areZerosEqual</span><span class="hljs-params">(zeroA, zeroB)</span> {</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>(1 / +0|0) -&gt; Infinity, but (1 / -0) -&gt; -Infinity and (Infinity !== -Infinity)</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-keyword">return</span> (<span class="hljs-number">1</span> / zeroA) === (<span class="hljs-number">1</span> / zeroB);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objEquiv</span><span class="hljs-params">(a, b)</span> {</span>
  <span class="hljs-keyword">if</span> (isUndefinedOrNull(a) || isUndefinedOrNull(b))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>an identical &#39;prototype&#39; property.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-keyword">if</span> (a.prototype !== b.prototype) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-comment">//~~~I've managed to break Object.keys through screwy arguments passing.</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>  Converting to array solves the problem.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-keyword">if</span> (isArguments(a)) {
    <span class="hljs-keyword">if</span> (!isArguments(b)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    a = pSlice.call(a);
    b = pSlice.call(b);
    <span class="hljs-keyword">return</span> deepEqual(a, b);
  }
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">var</span> ka = Object_keys(a),
        kb = Object_keys(b),
        key, i;
  } <span class="hljs-keyword">catch</span> (e) {<span class="hljs-comment">//happens when one is a string literal and the other isn't</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>having the same number of owned properties (keys incorporates
hasOwnProperty)</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-keyword">if</span> (ka.length != kb.length)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-comment">//the same set of keys (although not necessarily the same order),</span>
  ka.sort();
  kb.sort();
  <span class="hljs-comment">//~~~cheap key test</span>
  <span class="hljs-keyword">for</span> (i = ka.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    <span class="hljs-keyword">if</span> (ka[i] != kb[i])
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-comment">//equivalent values for every corresponding key, and</span>
  <span class="hljs-comment">//~~~possibly expensive deep test</span>
  <span class="hljs-keyword">for</span> (i = ka.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    key = ka[i];
    <span class="hljs-keyword">if</span> (!deepEqual(a[key], b[key])) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}</div></div></div></div></body></html>